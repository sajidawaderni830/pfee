<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>S'inscrire</title>
    <!-- plugins:css -->
    <link rel="stylesheet" href="assets/vendors/mdi/css/materialdesignicons.min.css">
    <link rel="stylesheet" href="assets/vendors/css/vendor.bundle.base.css">
    <!-- endinject -->
    <!-- Plugin css for this page -->
    <!-- End plugin css for this page -->
    <!-- inject:css -->
    <!-- endinject -->
    <!-- Layout styles -->
    <link rel="stylesheet" href="assets/css/style.css">
    <!-- End layout styles -->
    <link rel="shortcut icon" href="assets/images/favicon.png" />
  </head>
  <body>
    <div class="container-scroller">
      <div class="container-fluid page-body-wrapper full-page-wrapper">
        <div class="content-wrapper d-flex align-items-center auth">


          <div class="col-md-6 grid-margin stretch-card">
            <div class="card">
              <div class="card-body">
                <h4 class="card-title">Register</h4>

                <span id ="result"></span>

                <form class="forms-sample">
                  <div class="form-group row">
                    <label  class="col-sm-3 col-form-label">Matricule fiscale</label>
                    <div class="col-sm-9">
                      <input type="text" class="form-control" id="matricule" placeholder="Matricule fiscale">
                    </div>
                  </div>
                  <div class="form-group row">
                    <label  class="col-sm-3 col-form-label">Nom</label>
                    <div class="col-sm-9">
                      <input type="text" class="form-control" id="name" placeholder="Nom">
                    </div>
                  </div>
                  <div class="form-group row">
                    <label  class="col-sm-3 col-form-label">Adresse email</label>
                    <div class="col-sm-9">
                      <input type="email" class="form-control" id="Email1" placeholder="Email">
                    </div>
                  </div>
                  <div class="form-group row">
                    <label  class="col-sm-3 col-form-label">Adresse</label>
                    <div class="col-sm-9">
                      <input type="text" class="form-control" id="adress" placeholder="Adresse">
                    </div>
                  </div>
                  <div class="form-group row">
                    <label  class="col-sm-3 col-form-label">Téléphone</label>
                    <div class="col-sm-9">
                      <input type="text" class="form-control" id="tel" placeholder="Téléphone">
                    </div>
                  </div>
                  <div class="form-group row">
                    <label  class="col-sm-3 col-form-label">Type d'activité</label>
                    <div class="col-sm-9">
                      <select class="form-control" id="type" placeholder="Type d'activité">
                        <option value="Restaurant">Restaurant</option>
                        <option value="Salon de the">Salon de thé</option>
                        <option value="Hotel">hôtel</option>
                        <option value="Agence de voyage">Agence de voyage</option>
                      </select>
                    </div>
                  </div>
                  <div class="form-group row">
                    <label  class="col-sm-3 col-form-label">Lien facebook</label>
                    <div class="col-sm-9">
                      <input type="text" class="form-control" id="fb" placeholder="Votre lien facebook">
                    </div>
                  </div>
                  <div class="form-group row">
                    <label  class="col-sm-3 col-form-label">Lien instagram</label>
                    <div class="col-sm-9">
                      <input type="text" class="form-control" id="insta" placeholder="Votre lien instagram">
                    </div>
                  </div>
                  <div class="form-group row">
                    <label  class="col-sm-3 col-form-label">Mot de passe</label>
                    <div class="col-sm-9">
                      <input type="password" class="form-control" id="Password" placeholder="Mot de passe">
                    </div>
                  </div>
                  <div class="form-group row">
                    <label  class="col-sm-3 col-form-label">Confirmer Mot de passe</label>
                    <div class="col-sm-9">
                      <input type="password" class="form-control" id="Password2" placeholder="Confirmer Mot de passe">
                    </div>
                  </div>
                  <div class="mt-3">
                    <a class="btn btn-block btn-gradient-primary btn-lg font-weight-medium auth-form-btn" type="submit" onclick="register()">S'INSCRIRE</a>
                  </div>
                  <div class="text-center mt-4 font-weight-light"> Vous avez déjà un compte? <a href="login.html" class="text-primary">S'identifier</a>
                  </div>
                </form>
              </div>
            </div>
          </div>
     
         
        </div>
        <!-- content-wrapper ends -->
      </div>
      <!-- page-body-wrapper ends -->
    </div>
    <!-- container-scroller -->
    <!-- plugins:js -->
    <script src="assets/vendors/js/vendor.bundle.base.js"></script>
    <!-- endinject -->
    <!-- Plugin js for this page -->
    <!-- End plugin js for this page -->
    <!-- inject:js -->
    <script src="assets/js/off-canvas.js"></script>
    <script src="assets/js/hoverable-collapse.js"></script>
    <script src="assets/js/misc.js"></script>
    <!-- endinject -->
    <script>

      function register(){
        if (document.getElementById("Password2").value ==document.getElementById("Password").value)
			  {
    
      
        // Post a user
      var url = "http://192.168.43.47:3000/partenaires";
      
      var data = {};
    data.nom = document.getElementById("name").value;
      data.email  = document.getElementById("Email1").value;
      data.mot_de_passe  = document.getElementById("Password").value;
      data.telephone  = document.getElementById("tel").value;
      data.adress  = document.getElementById("adress").value;
      data.matricule_fisquale   = document.getElementById("matricule").value;
      data.type_activite   = document.getElementById("type").value;
      data.lien_fb   = document.getElementById("fb").value;
      data. lien_insta   = document.getElementById("insta").value;
     localStorage.setItem("activite",document.getElementById("type").value);
      
      
      
      var json = JSON.stringify(data);
      
      var xhr = new XMLHttpRequest();
      xhr.open("POST", url, true);
      xhr.setRequestHeader('Content-type','application/json; charset=utf-8');
      xhr.onload = function () {
        var partenaires = JSON.parse(xhr.responseText);
        if (xhr.readyState == 4 && xhr.status == "200") {
        console.table(partenaires);
        document.getElementById("result").innerHTML = 	  
        `
              <div class="alert alert-block alert-success">
                 <center> <h1>	partenaire ajouté</h1></center>
              </div>	`;

            } else {
				document.getElementById("result").innerHTML = partenaires.message;
					console.error(partenairs);
	
					
			  }
			}
			xhr.send(json);
		}else{
			document.getElementById("result").innerHTML = 	  
			`<div class="alert alert-block alert-danger">
                 <center> <h1>	Confirmer votre mot de passe</h1></center>
              </div>`;
		  	}
		} 
	  
	  

 
      
      </script>
  </body>
</html>