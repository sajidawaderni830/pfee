<!DOCTYPE html>
<html>
  <head>
    <!-- Required meta tags-->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <!-- Color theme for statusbar -->
    <meta name="theme-color" content="#2196f3">
    <!-- Your app title -->
    <title>Rechercher</title>
    <!-- Path to Framework7 Library CSS, Material Theme -->
    <link rel="stylesheet" href="css/framework7.material.min.css">
    <!-- Path to Framework7 color related styles, Material Theme -->
    <link rel="stylesheet" href="css/framework7.material.colors.min.css">
    <!-- Path to your custom app styles-->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" type="text/css" href="fonts.css">
    <link rel="stylesheet" href="css/lightbox.css">
    <link href = "https://fonts.googleapis.com/icon?family=Material+Icons" rel = "stylesheet">
    <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css'>
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/awesome-bootstrap-checkbox/0.3.7/awesome-bootstrap-checkbox.min.css'><link rel="stylesheet" href="./style.css">
    <style>
        #myInput 
      {
        background-image: url('css/searchicon.png');
        background-position: 10px 10px;
        background-repeat: no-repeat;
        width: 45%;
        font-size: 16px;
        padding: 12px 20px 12px 40px;
        border: 2px solid #000;
        margin-bottom: 12px;
        margin-left: 20px;
      }
      #myInput1
      {
        background-image: url('css/searchicon.png');
        background-position: 10px 10px;
        background-repeat: no-repeat;
        width: 45%;
        font-size: 16px;
        padding: 12px 20px 12px 40px;
        border: 2px solid #000;
        margin-bottom: 12px;
        margin-left: 70px;
      }
    </style>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js" integrity="sha384-SR1sx49pcuLnqZUnnPwx6FCym0wLsk5JZuNx2bPPENzswTNFaQU1RDvt3wT4gWFG" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.min.js" integrity="sha384-j0CNLUeiqtyaRmlzUHCPZ+Gy5fQu0dQ6eZ/xAww941Ai1SxSY+0EQqNXNE6DZiVc" crossorigin="anonymous"></script>
      
</head>
    <body>
        <div class="statusbar-overlay"></div>
        <!-- Views -->
        <div class="views">
            <!-- Your main view, should have "view-main" class -->
            <div class="view view-main">
                <!-- Pages container, because we use fixed navbar and toolbar, it has additional appropriate classes-->
                <div class="pages navbar-fixed toolbar-fixed">
                    <!-- Page, "data-page" contains page name -->
                    <div data-page="index" class="page">

                        <!-- Top Navbar. In Material theme it should be inside of the page-->
                        <div class="navbar theme-aqua">
                            <div class="navbar-inner">
                                <a href="#" data-panel="left" class="open-panel"><img src="images/menu.svg" width="28px" class="menu"></a>
                                <div class="center"><small>Chercher</small></div>
                            </div>
                        </div>
                        <!-- Panels Overlay -->
                        <div class="panel-overlay"></div>

                        <!-- Right Panel with Cover effect -->
                        <div class="panel panel-left panel-cover">
                            <div class="list-block">
                                <ul>
                                    <li>
                                        <a href="Accueil.html" class="item-link item-content external">
                                            <div class="item-media"><span class>  <i class="fa fa-home"></i> </span></div>
                                            <div class="item-inner">
                                                <div class="item-title">Accueil</div>
                                            </div>
                                        </a>
                                    </li>
                                    <li>
                                    <a href="profile.html" class="item-link item-content external">
                                        <div class="item-media"><span class="icon-happy"></span></div>
                                        <div class="item-inner">
                                        <div class="item-title">Profile</div>
                                        </div>
                                    </a>
                                    </li>
                                    <li>
                                    <a href="quefaire.html" class="item-link item-content external">
                                        <div class="item-media"><span class="icon-star-full"></span></div>
                                        <div class="item-inner">
                                        <div class="item-title"><b>Que faire</b></div>
                                        </div>
                                    </a>
                                    </li>
                                    <li>
                                    <a href="visitar.html" class="item-link item-content external">
                                        <div class="item-media"><span class="icon-camera"></span></div>
                                        <div class="item-inner">
                                        <div class="item-title">Que visiter</div>
                                        </div>
                                    </a>
                                    </li>
                                    <li>
                                    <a href="restaurant.html" class="item-link item-content external">
                                        <div class="item-media"><span class="icon-spoon-knife"></span></div>
                                        <div class="item-inner">
                                        <div class="item-title">Où manger</div>
                                
                                        </div>
                                    </a>
                                    </li>
                                    <li>
                                    <a href="salondethe.html" class="item-link item-content external">
                                        <div class="item-media"><span class="icon-glass2"></span></div>
                                        <div class="item-inner">
                                        <div class="item-title">Salon de thé</div>
                                
                                        </div>
                                    </a>
                                    </li>
                                    <li>
                                    <a href="hotels.html" class="item-link item-content external">
                                        <div class="item-media"><span class="icon-office"></span></div>
                                        <div class="item-inner">
                                        <div class="item-title">Où se reposer</div>
                                
                                        </div>
                                    </a>
                                    </li>
                                    <li>
                                    <a href="recherche.html" class="item-link item-content external">
                                        <div class="item-media"><span class="icon-location2"></span></div>
                                        <div class="item-inner">
                                        <div class="item-title">La carte</div>
                                        </div>
                                    </a>
                                    </li>
                                    <li>
                                    <a href="apropos.html" class="item-link item-content external">
                                        <div class="item-media"><span class="icon-info"></span></div>
                                        <div class="item-inner">
                                        <div class="item-title">À propos de</div>
                                
                                        </div>
                                    </a>
                                    </li>
                                    <li>
                                    <a href="rechercheoffre.html" class="item-link item-content external">
                                        <div class="item-media"><span class="fa fa-search"> </span></div>
                                        <div class="item-inner">
                                        <div class="item-title">Rechercher</div>
                                
                                        </div>
                                    </a>
                                    </li>
                                    <li>
                                    <a href="login.html" class="item-link item-content external" onclick="deconnecter();">
                                        <div class="item-media"><span class>  <i class="fa fa-sign-out"></i> </span></div>
                                        <div class="item-inner">
                                        <div class="item-title">Déconnecter</div>
                                
                                        </div>
                                    </a>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <div class="page-content">
                            <input type="text" id="myInput" onkeyup="myFunction()" placeholder="Search for Names.." title="Type in a Names">
                            <input type="text" id="myInput1" onkeyup="myFunction1()" placeholder="Search for Activity.." title="Type in a Activity">

                            <!--Card (Seccion)-->
                            <div class="content-block-title"></div>
                            <hr align="left" style="margin-left:14px;margin-right:14px">

                            <table id="listoffre" class="table table-dark table-striped">
                                <thead>
                                    <tr>
                                        <th scope="col">N°</th>
                                        <th scope="col">Name</th>
                                        <th scope="col">Activity</th>
                                        <th scope="col">Vue</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    <!-- Path to Framework7 Library JS-->
    <script type="text/javascript" src="js/framework7.min.js"></script>
     <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
    <script src="js/lightbox.js"></script>
    <!-- Path to your app js-->
    <script type="text/javascript" src="js/functions.js"></script>

  <script src="lib/moment/moment.min.js"></script>

    <script>
        function myFunction() 
        {
        var input, filter, table, tr, td, i, txtValue;
        input = document.getElementById("myInput");
        filter = input.value.toUpperCase();
        table = document.getElementById("listoffre");
        tr = table.getElementsByTagName("tr");
        for (i = 0; i < tr.length; i++) 
        {
            td = tr[i].getElementsByTagName("td")[1];
            if (td) 
            {
            txtValue = td.textContent || td.innerText;
            if (txtValue.toUpperCase().indexOf(filter) > -1) 
            {
                tr[i].style.display = "";
            } else 
            {
                tr[i].style.display = "none";
            }
            }       
        }
        }
    </script>

<script>
    function myFunction1() 
    {
      var input, filter, table, tr, td, i, txtValue;
      input = document.getElementById("myInput1");
      filter = input.value.toUpperCase();
      table = document.getElementById("listoffre");
      tr = table.getElementsByTagName("tr");
      for (i = 0; i < tr.length; i++) 
      {
        td = tr[i].getElementsByTagName("td")[2];
        if (td) 
        {
          txtValue = td.textContent || td.innerText;
          if (txtValue.toUpperCase().indexOf(filter) > -1) 
          {
            tr[i].style.display = "";
          } else 
          {
            tr[i].style.display = "none";
          }
        }       
      }
    }
  </script>

    <script>
        // Create a request variable and assign a new XMLHttpRequest object to it.
        var request = new XMLHttpRequest()

        // Open a new connection, using the GET request on the URL endpoint
        request.open('GET', 'http://192.168.43.47:3000/demandeoffres', true)
        request.onload = function() {

        // Begin accessing JSON data here
        var data = JSON.parse(this.response)

        var table = document.getElementById("listoffre");

        console.log(data);
       
        var j = 1;
        data.forEach(i => { 
            if (i.etat == "accepter") {
            console.log(i._id);
    
            var row = table.insertRow(-1);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            
            cell1.innerHTML = j  ;
            cell2.innerHTML = i.nompartenaire;
            cell3.innerHTML = i.activite;
            cell4.innerHTML = `<button onclick="window.location.href='view.html?id=`+ i._id +`';"> Vue</button>`;
            j = j + 1 ;  
            }      
        })
        
        }

        // Send request
        request.send()
    </script>

  </body>
</html>
